(function(){"use strict";var e={8529:function(e,t,o){var a=o(6369),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},l=[],s={},i=s,c=o(1001),n=(0,c.Z)(i,r,l,!1,null,null,null),p=n.exports,u=o(2631),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login_box"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"title"},[e._v(" 自 动 化 平 台 登 录 ")]),t("el-form",{ref:"loginRef",attrs:{model:e.formLogin,rules:e.loginRules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1),t("el-form-item",{attrs:{label:"记住账号"}},[t("el-switch",{model:{value:e.formLogin.status,callback:function(t){e.$set(e.formLogin,"status",t)},expression:"formLogin.status"}})],1),t("el-form-item",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.loginHandle}},[e._v("点击登录")])],1)],1)],1)],1)},m=[],f=(o(7658),{data(){return{formLogin:{username:"",password:"",status:!1},loginRules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:18,message:"密码的长度在6到18之间",trigger:"blur"}]}}},methods:{loginHandle:function(){window.sessionStorage.setItem("token","1234"),this.$router.push("/home")}},mounted(){const e=window.localStorage.getItem("username");e&&(this.formLogin.username=e,this.formLogin.status=!0)}}),g=f,b=(0,c.Z)(g,d,m,!1,null,"b87c4d4c",null),h=b.exports,v=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"home-container"},[t("el-header",[t("div",{staticClass:"title"},[e._v(" 草 原 荒 漠 化 管 理 系 统 ")]),t("div",{staticClass:"logonout"},[t("el-popconfirm",{attrs:{title:"确认退出登录？"},on:{confirm:function(t){return e.loginout()}}},[t("div",{attrs:{slot:"reference"},slot:"reference"},[e._v("退出登录")])])],1)]),t("el-container",[t("el-aside",{staticStyle:{overflow:"auto"},attrs:{width:"250px"}},[t("el-menu",{staticClass:"el-menu-demo",attrs:{router:e.rou,"background-color":"#003755","default-active":e.activeMenu,"text-color":"#fff","active-text-color":"#00aaff","unique-opened":""}},[t("el-menu-item",{attrs:{index:"/geoinfo"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("基础信息管理")])])],2),t("el-menu-item",{attrs:{index:"/grassland"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("草原资源管理")])])],2),t("el-menu-item",{attrs:{index:"/geoinfo1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("气象分析")])])],2),t("el-menu-item",{attrs:{index:"/geoinfo2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("荒漠化综合评价")])])],2),t("el-menu-item",{attrs:{index:"/geoinfo3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("荒漠化监测预警")])])],2),t("el-menu-item",{attrs:{index:"/geoinfo4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("决策支持")])])],2),t("el-menu-item",{attrs:{index:"/geoinfo5"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("成效评估")])])],2),t("el-menu-item",{attrs:{index:"/statistic"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-notebook-1"}),t("span",[e._v("统计分析")])])],2)],1)],1),t("el-main",{staticStyle:{overflow:"auto",padding:"0 5px"}},[t("router-view")],1)],1)],1)},w=[],j={data(){return{rou:!0,activeMenu:"/dgeoinfo"}},methods:{loginout(){window.sessionStorage.removeItem("token"),this.$router.push("/login")}}},P=j,y=(0,c.Z)(P,v,w,!1,null,"10edb078",null),x=y.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"project_list"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("接口管理")]),t("el-breadcrumb-item",[e._v("接口列表")])],1)],1),t("el-card",{staticClass:"box-card"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[e._v(" 选择项目 "),t("el-select",{attrs:{placeholder:"请选择项目"},model:{value:e.project_id,callback:function(t){e.project_id=t},expression:"project_id"}},e._l(e.projectList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("添加接口")])],1)],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.projectList}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"name",label:"接口名",width:"200"}}),t("el-table-column",{attrs:{prop:"desc",label:"描述信息",width:"280"}}),t("el-table-column",{attrs:{prop:"leader",label:"负责人",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"tester",label:"测试人员",width:"100"}}),t("el-table-column",{attrs:{prop:"interfaces",label:"接口数量",width:"120",sortable:""}}),t("el-table-column",{attrs:{prop:"testcases",label:"用例数量",width:"80"}}),t("el-table-column",{attrs:{prop:"testsuits",label:"套件数量",width:"80"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除 ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑项目",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"项目名",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.name,callback:function(t){e.$set(e.editProject,"name",t)},expression:"editProject.name"}})],1),t("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.leader,callback:function(t){e.$set(e.editProject,"leader",t)},expression:"editProject.leader"}})],1),t("el-form-item",{attrs:{label:"测试人员",prop:"tester"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.tester,callback:function(t){e.$set(e.editProject,"tester",t)},expression:"editProject.tester"}})],1),t("el-form-item",{attrs:{label:"开发人员",prop:"programmer"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.programmer,callback:function(t){e.$set(e.editProject,"programmer",t)},expression:"editProject.programmer"}})],1),t("el-form-item",{attrs:{label:"发布应用",prop:"publish_app"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.publish_app,callback:function(t){e.$set(e.editProject,"publish_app",t)},expression:"editProject.publish_app"}})],1),t("el-form-item",{attrs:{label:"描述信息"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("创建项目")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[t("el-input",{model:{value:e.newProject.name,callback:function(t){e.$set(e.newProject,"name",t)},expression:"newProject.name"}})],1),t("el-form-item",{attrs:{label:"测试者",prop:"tester"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.tester,callback:function(t){e.$set(e.newProject,"tester",t)},expression:"newProject.tester"}})],1),t("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.leader,callback:function(t){e.$set(e.newProject,"leader",t)},expression:"newProject.leader"}})],1),t("el-form-item",{attrs:{label:"开发人员",prop:"programmer"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.programmer,callback:function(t){e.$set(e.newProject,"programmer",t)},expression:"newProject.programmer"}})],1),t("el-form-item",{attrs:{label:"发布应用",prop:"publish_app"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.publish_app,callback:function(t){e.$set(e.newProject,"publish_app",t)},expression:"newProject.publish_app"}})],1),t("el-form-item",{attrs:{label:"项目描述"}},[t("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.createProject}},[e._v("提 交")])],1)],2)],1)},k=[],_={data(){return{project_id:"",projectList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogCreate:!1,newProject:{name:"",leader:"",tester:"",programmer:"",publish_app:"",desc:""},caseRules:{name:[{required:!0,message:"项目名不能为空",trigger:"blur"}],leader:[{required:!0,message:"负责人不能为空",trigger:"blur"}],tester:[{required:!0,message:"测试人员不能为空",trigger:"blur"}],programmer:[{required:!0,message:"开发人员不能为空",trigger:"blur"}],publish_app:[{required:!0,message:"发布应用不能为空",trigger:"blur"}]}}},methods:{createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},C=_,z=(0,c.Z)(C,$,k,!1,null,null,null),R=(z.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"caseEdit"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("用例管理")]),t("el-breadcrumb-item",[e._v("用例编辑")])],1)],1),t("el-card",{staticClass:"box-card"},[t("el-divider",{attrs:{"content-position":"left"}},[t("span",{staticStyle:{color:"#409EFF","font-weight":"bold"}},[e._v("Api")])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:3}},[t("el-select",{attrs:{placeholder:"请求方法"},model:{value:e.caseInfo.method,callback:function(t){e.$set(e.caseInfo,"method",t)},expression:"caseInfo.method"}},[t("el-option",{attrs:{label:"GET",value:"GET"}}),t("el-option",{attrs:{label:"POST",value:"POST"}}),t("el-option",{attrs:{label:"PUT",value:"PUT"}}),t("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),t("el-option",{attrs:{label:"PATCH",value:"PATCH"}}),t("el-option",{attrs:{label:"HEAD",value:"HEAD"}}),t("el-option",{attrs:{label:"OPTION",value:"OPTION"}})],1)],1),t("el-col",{attrs:{span:9}},[t("el-input",{attrs:{placeholder:"host地址"},model:{value:e.caseInfo.host,callback:function(t){e.$set(e.caseInfo,"host",t)},expression:"caseInfo.host"}},[t("template",{slot:"prepend"},[e._v("Host")])],2)],1),t("el-col",{attrs:{span:9}},[t("el-input",{attrs:{placeholder:"接口路径"},model:{value:e.caseInfo.interface,callback:function(t){e.$set(e.caseInfo,"interface",t)},expression:"caseInfo.interface"}},[t("template",{slot:"prepend"},[e._v("接口地址")])],2)],1),t("el-col",{attrs:{span:3}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-s-promotion"}},[e._v("Run")])],1)],1),t("el-divider",{attrs:{"content-position":"left"}},[t("span",{staticStyle:{color:"#409EFF","font-weight":"bold"}},[e._v("Request")])]),t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"请求头"}},e._l(e.caseInfo.headers,(function(o,a){return t("el-row",{key:a,staticStyle:{margin:"10px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"KEY"},model:{value:o.key,callback:function(t){e.$set(o,"key",t)},expression:"header.key"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"VALUE"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"header.value"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteInputRow(o,"headers")}}})],1)],1)})),1),t("el-tab-pane",{attrs:{label:"请求参数"}},[t("el-tabs",[t("el-tab-pane",{attrs:{label:"application/json"}},[t("editor",{ref:"editor",attrs:{height:"300",width:"100%",content:e.caseInfo.json,options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,tabSize:2,fontSize:20,showPrintMargin:!1},lang:"json"},on:{init:e.editorInit},model:{value:e.caseInfo.json,callback:function(t){e.$set(e.caseInfo,"json",t)},expression:"caseInfo.json"}}),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.jsonFormat}},[e._v("json格式化")])],1),t("el-tab-pane",{attrs:{label:"Params"}},e._l(e.caseInfo.params,(function(o,a){return t("el-row",{key:a,staticStyle:{margin:"10px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"KEY"},model:{value:o.key,callback:function(t){e.$set(o,"key",t)},expression:"par.key"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"VALUE"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"par.value"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteInputRow(o,"params")}}})],1)],1)})),1),t("el-tab-pane",{attrs:{label:"application/X-www-urlencoded"}},e._l(e.caseInfo.data,(function(o,a){return t("el-row",{key:a,staticStyle:{margin:"10px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"KEY"},model:{value:o.key,callback:function(t){e.$set(o,"key",t)},expression:"val.key"}})],1),t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"VALUE"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"val.value"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteInputRow(o,"data")}}})],1)],1)})),1)],1)],1),t("el-tab-pane",{attrs:{label:"响应提取"}},[e._v("响应提取")]),t("el-tab-pane",{attrs:{label:"用例断言"}},[e._v("用例断言")]),t("el-tab-pane",{attrs:{label:"数据库校验"}},[e._v("数据库校验")])],1),t("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("用例详情")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("json-view",{staticStyle:{height:"600px"},attrs:{data:e.caseInfo}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],1)],1)}),E=[],q=o(5227),S=o.n(q),I=o(4918),L=o.n(I),V={data(){return{dialogVisible:!1,caseInfo:{method:"GET",host:"",interface:"",headers:[{key:"",value:""}],params:[{key:"",value:""}],data:[{key:"",value:""}],json:"{}"}}},methods:{deleteInputRow(e,t){console.log("要删除的数据:",e),this.caseInfo[t]=this.caseInfo[t].filter((function(t,o){return t!==e}))},addInputRow(e){const t=this.caseInfo[e];0===t.length&&this.caseInfo[e].push({key:"",value:""}),(t[t.length-1].key||t[t.length-1].value)&&this.caseInfo[e].push({key:"",value:""})},editorInit(){o(9287),o(4514),o(93),o(3577),o(1210),o(1371)},jsonFormat(){const e=JSON.parse(this.caseInfo.json);this.caseInfo.json=JSON.stringify(e,null,4)}},watch:{"caseInfo.headers":{handler:function(e,t){this.addInputRow("headers")},deep:!0},"caseInfo.params":{deep:!0,handler:function(e,t){this.addInputRow("params")}},"caseInfo.data":{deep:!0,handler:function(e,t){this.addInputRow("data")}}},components:{Editor:S(),jsonView:L()}},D=V,A=(0,c.Z)(D,R,E,!1,null,"a15c3960",null),M=(A.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"project_list"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("项目管理")]),t("el-breadcrumb-item",[e._v("项目列表")])],1)],1),t("el-card",{staticClass:"box-card"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("创建项目")]),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.projectList}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"name",label:"项目名",width:"200"}}),t("el-table-column",{attrs:{prop:"desc",label:"描述信息",width:"280"}}),t("el-table-column",{attrs:{prop:"leader",label:"负责人",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"tester",label:"测试人员",width:"100"}}),t("el-table-column",{attrs:{prop:"interfaces",label:"接口数量",width:"120",sortable:""}}),t("el-table-column",{attrs:{prop:"testcases",label:"用例数量",width:"80"}}),t("el-table-column",{attrs:{prop:"testsuits",label:"套件数量",width:"80"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除 ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑项目",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"项目名",prop:"name"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.name,callback:function(t){e.$set(e.editProject,"name",t)},expression:"editProject.name"}})],1),t("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.leader,callback:function(t){e.$set(e.editProject,"leader",t)},expression:"editProject.leader"}})],1),t("el-form-item",{attrs:{label:"测试人员",prop:"tester"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.tester,callback:function(t){e.$set(e.editProject,"tester",t)},expression:"editProject.tester"}})],1),t("el-form-item",{attrs:{label:"开发人员",prop:"programmer"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.programmer,callback:function(t){e.$set(e.editProject,"programmer",t)},expression:"editProject.programmer"}})],1),t("el-form-item",{attrs:{label:"发布应用",prop:"publish_app"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.publish_app,callback:function(t){e.$set(e.editProject,"publish_app",t)},expression:"editProject.publish_app"}})],1),t("el-form-item",{attrs:{label:"描述信息"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("创建项目")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[t("el-input",{model:{value:e.newProject.name,callback:function(t){e.$set(e.newProject,"name",t)},expression:"newProject.name"}})],1),t("el-form-item",{attrs:{label:"测试者",prop:"tester"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.tester,callback:function(t){e.$set(e.newProject,"tester",t)},expression:"newProject.tester"}})],1),t("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.leader,callback:function(t){e.$set(e.newProject,"leader",t)},expression:"newProject.leader"}})],1),t("el-form-item",{attrs:{label:"开发人员",prop:"programmer"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.programmer,callback:function(t){e.$set(e.newProject,"programmer",t)},expression:"newProject.programmer"}})],1),t("el-form-item",{attrs:{label:"发布应用",prop:"publish_app"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.publish_app,callback:function(t){e.$set(e.newProject,"publish_app",t)},expression:"newProject.publish_app"}})],1),t("el-form-item",{attrs:{label:"项目描述"}},[t("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.createProject}},[e._v("提 交")])],1)],2)],1)}),O=[],T={data(){return{projectList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogCreate:!1,newProject:{name:"",leader:"",tester:"",programmer:"",publish_app:"",desc:""},caseRules:{name:[{required:!0,message:"项目名不能为空",trigger:"blur"}],leader:[{required:!0,message:"负责人不能为空",trigger:"blur"}],tester:[{required:!0,message:"测试人员不能为空",trigger:"blur"}],programmer:[{required:!0,message:"开发人员不能为空",trigger:"blur"}],publish_app:[{required:!0,message:"发布应用不能为空",trigger:"blur"}]}}},methods:{createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},Z=T,F=(0,c.Z)(Z,M,O,!1,null,null,null),H=(F.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"geoinfo"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("基础信息管理")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"landcover",label:"地貌类型",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"slope",label:"坡度",width:"100"}}),t("el-table-column",{attrs:{prop:"elevation",label:"高程",width:"100"}}),t("el-table-column",{attrs:{prop:"hydrocha",label:"水文特征",width:"100"}}),t("el-table-column",{attrs:{prop:"soiltype",label:"土壤类型",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"植被类型",width:"100",sortable:""}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"地貌类型",prop:"landcover"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.landcover,callback:function(t){e.$set(e.editProject,"landcover",t)},expression:"editProject.landcover"}})],1),t("el-form-item",{attrs:{label:"坡度",prop:"slope"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.slope,callback:function(t){e.$set(e.editProject,"slope",t)},expression:"editProject.slope"}})],1),t("el-form-item",{attrs:{label:"高程",prop:"elevation"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.elevation,callback:function(t){e.$set(e.editProject,"elevation",t)},expression:"editProject.elevation"}})],1),t("el-form-item",{attrs:{label:"水文特征",prop:"hydrocha"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.hydrocha,callback:function(t){e.$set(e.editProject,"hydrocha",t)},expression:"editProject.hydrocha"}})],1),t("el-form-item",{attrs:{label:"土壤类型",prop:"soiltype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.soiltype,callback:function(t){e.$set(e.editProject,"soiltype",t)},expression:"editProject.soiltype"}})],1),t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"地貌类型",prop:"landcover"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.landcover,callback:function(t){e.$set(e.newProject,"landcover",t)},expression:"newProject.landcover"}})],1),t("el-form-item",{attrs:{label:"坡度",prop:"slope"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.slope,callback:function(t){e.$set(e.newProject,"slope",t)},expression:"newProject.slope"}})],1),t("el-form-item",{attrs:{label:"高程",prop:"elevation"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.elevation,callback:function(t){e.$set(e.newProject,"elevation",t)},expression:"newProject.elevation"}})],1),t("el-form-item",{attrs:{label:"水文特征",prop:"hydrocha"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.hydrocha,callback:function(t){e.$set(e.newProject,"hydrocha",t)},expression:"newProject.hydrocha"}})],1),t("el-form-item",{attrs:{label:"土壤类型",prop:"soiltype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.soiltype,callback:function(t){e.$set(e.newProject,"soiltype",t)},expression:"newProject.soiltype"}})],1),t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"地貌类型",prop:"landcover"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.landcover,callback:function(t){e.$set(e.viewProject,"landcover",t)},expression:"viewProject.landcover"}})],1),t("el-form-item",{attrs:{label:"坡度",prop:"slope"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.slope,callback:function(t){e.$set(e.viewProject,"slope",t)},expression:"viewProject.slope"}})],1),t("el-form-item",{attrs:{label:"高程",prop:"elevation"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.elevation,callback:function(t){e.$set(e.viewProject,"elevation",t)},expression:"viewProject.elevation"}})],1),t("el-form-item",{attrs:{label:"水文特征",prop:"hydrocha"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.hydrocha,callback:function(t){e.$set(e.viewProject,"hydrocha",t)},expression:"viewProject.hydrocha"}})],1),t("el-form-item",{attrs:{label:"土壤类型",prop:"soiltype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.soiltype,callback:function(t){e.$set(e.viewProject,"soiltype",t)},expression:"viewProject.soiltype"}})],1),t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)}),N=[],J={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{landcover:"",slope:"",elevation:"",hydrocha:"",soiltype:"",vegtype:"",desc:""},caseRules:{landcover:[{required:!0,message:"不能为空",trigger:"blur"}],slope:[{required:!0,message:"不能为空",trigger:"blur"}],elevation:[{required:!0,message:"不能为空",trigger:"blur"}],hydrocha:[{required:!0,message:"不能为空",trigger:"blur"}],soiltype:[{required:!0,message:"不能为空",trigger:"blur"}],vegtype:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,landcover:`测试${r}`,slope:`测试${r}`,elevation:`测试${r}`,hydrocha:`测试${r}`,soiltype:`测试${r}`,vegtype:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},U=J,G=(0,c.Z)(U,H,N,!1,null,null,null),K=G.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("草原资源管理")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"植被类型",width:"100"}}),t("el-table-column",{attrs:{prop:"coverage",label:"植被盖度",width:"100"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"植被生长状况",width:"120"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"植被生命周期",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"生物量",width:"100"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"根系深度",width:"100"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被盖度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"植被生长状况",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被生命周期",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"生物量",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"根系深度",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被盖度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"植被生长状况",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被生命周期",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"生物量",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"根系深度",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"植被类型",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被盖度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"植被生长状况",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被生命周期",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"生物量",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"根系深度",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},B=[],W={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},X=W,Q=(0,c.Z)(X,Y,B,!1,null,null,null),ee=Q.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("气象分析")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"降水量",width:"100"}}),t("el-table-column",{attrs:{prop:"coverage",label:"温度",width:"100"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"相对湿度",width:"120"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"日照时数",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"风向",width:"100"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"风速",width:"100"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"降水量",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"温度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"相对湿度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"日照时数",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"风向",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"风速",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"降水量",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"温度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"相对湿度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"日照时数",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"风向",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"风速",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"降水量",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"温度",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"相对湿度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"日照时数",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"风向",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"风速",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},oe=[],ae={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},re=ae,le=(0,c.Z)(re,te,oe,!1,null,null,null),se=le.exports,ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("荒漠化综合评价")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"区域",width:"100"}}),t("el-table-column",{attrs:{prop:"coverage",label:"面积",width:"100"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"荒漠化等级",width:"120"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"影响因素",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"治理措施",width:"100"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"检测报告",width:"100"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"荒漠化等级",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"影响因素",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"治理措施",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"检测报告",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"荒漠化等级",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"影响因素",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"治理措施",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"检测报告",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"荒漠化等级",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"影响因素",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"治理措施",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"检测报告",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},ce=[],ne={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},pe=ne,ue=(0,c.Z)(pe,ie,ce,!1,null,null,null),de=ue.exports,me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("荒漠化监测预警")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"区域",width:"100"}}),t("el-table-column",{attrs:{prop:"coverage",label:"植被变化趋势",width:"120"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"土壤侵蚀风险程度",width:"140"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"水土流失程度",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"沙漠化严重程度",width:"140"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"强沙尘暴概率",width:"140"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被变化趋势",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"土壤侵蚀风险程度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"水土流失程度",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"沙漠化严重程度",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"强沙尘暴概率",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被变化趋势",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"土壤侵蚀风险程度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"水土流失程度",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"沙漠化严重程度",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"强沙尘暴概率",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"区域",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"植被变化趋势",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"土壤侵蚀风险程度",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"水土流失程度",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"沙漠化严重程度",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"强沙尘暴概率",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},fe=[],ge={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},be=ge,he=(0,c.Z)(be,me,fe,!1,null,null,null),ve=he.exports,we=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("决策支持")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"分析报告",width:"100"}}),t("el-table-column",{attrs:{prop:"coverage",label:"决策指标",width:"100"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"场景分析",width:"120"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"方案评估",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"效果预测",width:"100"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"决策优化",width:"100"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"分析报告",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"决策指标",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"场景分析",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"方案评估",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"效果预测",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"决策优化",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"分析报告",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"决策指标",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"场景分析",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"方案评估",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"效果预测",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"决策优化",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"分析报告",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"决策指标",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"场景分析",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"方案评估",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"效果预测",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"决策优化",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},je=[],Pe={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},ye=Pe,xe=(0,c.Z)(ye,we,je,!1,null,null,null),$e=xe.exports,ke=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grassland"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("成效评估")])],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogCreate="true"}}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"}},[e._v("刷新")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened"}},[e._v("导出")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-upload"}},[e._v("导入")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-printer"}},[e._v("打印")])],1),t("el-table",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{data:e.geoinfoList}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),t("el-table-column",{attrs:{prop:"vegtype",label:"治理项目名称",width:"120"}}),t("el-table-column",{attrs:{prop:"coverage",label:"治理面积",width:"100"}}),t("el-table-column",{attrs:{prop:"growthstatus",label:"治理时间",width:"120"}}),t("el-table-column",{attrs:{prop:"lifecycle",label:"植被恢复情况",width:"120"}}),t("el-table-column",{attrs:{prop:"biomass",label:"土壤保持效果",width:"120"}}),t("el-table-column",{attrs:{prop:"rootdepth",label:"水土流失减少情况",width:"140"}}),t("el-table-column",{attrs:{prop:"desc",label:"备注",width:"300"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proEdit(o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.proView(o.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.proDelete(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[5,10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit},on:{"update:visible":function(t){e.dialogEdit=t}}},[t("el-form",{ref:"updateRef",attrs:{model:e.editProject,rules:e.caseRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"治理项目名称",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.vegtype,callback:function(t){e.$set(e.editProject,"vegtype",t)},expression:"editProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"治理面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.coverage,callback:function(t){e.$set(e.editProject,"coverage",t)},expression:"editProject.coverage"}})],1),t("el-form-item",{attrs:{label:"治理时间",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.growthstatus,callback:function(t){e.$set(e.editProject,"growthstatus",t)},expression:"editProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被恢复情况",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.lifecycle,callback:function(t){e.$set(e.editProject,"lifecycle",t)},expression:"editProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"土壤保持效果",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.biomass,callback:function(t){e.$set(e.editProject,"biomass",t)},expression:"editProject.biomass"}})],1),t("el-form-item",{attrs:{label:"水土流失减少情况",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editProject.rootdepth,callback:function(t){e.$set(e.editProject,"rootdepth",t)},expression:"editProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.editProject.desc,callback:function(t){e.$set(e.editProject,"desc",t)},expression:"editProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateProject}},[e._v("确 定")])],1)],1),t("el-dialog",{ref:"createRef",attrs:{visible:e.dialogCreate,rules:e.caseRules},on:{"update:visible":function(t){e.dialogCreate=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("新增")])]),t("el-form",{ref:"createRef",attrs:{model:e.newProject,"label-width":"80px",size:"mini",rules:e.caseRules}},[t("el-form-item",{attrs:{label:"治理项目名称",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.vegtype,callback:function(t){e.$set(e.newProject,"vegtype",t)},expression:"newProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"治理面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.coverage,callback:function(t){e.$set(e.newProject,"coverage",t)},expression:"newProject.coverage"}})],1),t("el-form-item",{attrs:{label:"治理时间",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.growthstatus,callback:function(t){e.$set(e.newProject,"growthstatus",t)},expression:"newProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被恢复情况",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.lifecycle,callback:function(t){e.$set(e.newProject,"lifecycle",t)},expression:"newProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"土壤保持效果",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.biomass,callback:function(t){e.$set(e.newProject,"biomass",t)},expression:"newProject.biomass"}})],1),t("el-form-item",{attrs:{label:"水土流失减少情况",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.rootdepth,callback:function(t){e.$set(e.newProject,"rootdepth",t)},expression:"newProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off"},model:{value:e.newProject.desc,callback:function(t){e.$set(e.newProject,"desc",t)},expression:"newProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogCreate=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createProject=!1}}},[e._v("提 交")])],1)],2),t("el-dialog",{attrs:{visible:e.dialogView},on:{"update:visible":function(t){e.dialogView=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{"text-align":"center",width:"100%","font-size":"24px"}},[e._v("查看")])]),t("el-form",{attrs:{model:e.viewProject,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"治理项目名称",prop:"vegtype"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.vegtype,callback:function(t){e.$set(e.viewProject,"vegtype",t)},expression:"viewProject.vegtype"}})],1),t("el-form-item",{attrs:{label:"治理面积",prop:"coverage"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.coverage,callback:function(t){e.$set(e.viewProject,"coverage",t)},expression:"viewProject.coverage"}})],1),t("el-form-item",{attrs:{label:"治理时间",prop:"growthstatus"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.growthstatus,callback:function(t){e.$set(e.viewProject,"growthstatus",t)},expression:"viewProject.growthstatus"}})],1),t("el-form-item",{attrs:{label:"植被恢复情况",prop:"lifecycle"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.lifecycle,callback:function(t){e.$set(e.viewProject,"lifecycle",t)},expression:"viewProject.lifecycle"}})],1),t("el-form-item",{attrs:{label:"土壤保持效果",prop:"biomass"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.biomass,callback:function(t){e.$set(e.viewProject,"biomass",t)},expression:"viewProject.biomass"}})],1),t("el-form-item",{attrs:{label:"水土流失减少情况",prop:"rootdepth"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:e.viewProject.rootdepth,callback:function(t){e.$set(e.viewProject,"rootdepth",t)},expression:"viewProject.rootdepth"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,autocomplete:"off",readonly:!0},model:{value:e.viewProject.desc,callback:function(t){e.$set(e.viewProject,"desc",t)},expression:"viewProject.desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogView=!1}}},[e._v("关闭窗口")])],1)],2)],1)},_e=[],Ce={data(){return{geoinfoList:[],page:1,count:0,size:10,dialogEdit:!1,editProject:{},dialogView:!1,viewProject:{},dialogCreate:!1,newProject:{vegtype:"",coverage:"",growthstatus:"",lifecycle:"",biomass:"",rootdepth:"",desc:""},caseRules:{vegtype:[{required:!0,message:"不能为空",trigger:"blur"}],coverage:[{required:!0,message:"不能为空",trigger:"blur"}],growthstatus:[{required:!0,message:"不能为空",trigger:"blur"}],lifecycle:[{required:!0,message:"不能为空",trigger:"blur"}],biomass:[{required:!0,message:"不能为空",trigger:"blur"}],rootdepth:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created(){this.createRandomArrayDict()},methods:{createRandomArrayDict(){const e=5,t=20,o=Math.floor(Math.random()*(t-e+1))+e;let a=[];for(let r=0;r<o;r++){let e={id:`测试${r}`,vegtype:`测试${r}`,coverage:`测试${r}`,growthstatus:`测试${r}`,lifecycle:`测试${r}`,biomass:`测试${r}`,rootdepth:`测试${r}`,desc:`测试${r}`};a.push(e)}this.geoinfoList=a},createProject(){this.$refs.createRef.validate((async e=>{if(!e)return;const t=await this.$request.post("/projects/",this.newProject);201===t.status?(this.$message({type:"success",message:"项目创建成功!",duration:1e3}),this.getProject(),this.dialogCreate=!1):(console.log(t),this.$message.error("服务端异常!"))}))},proEdit(e){console.log(e),this.editProject={...e},this.dialogEdit=!0},proView(e){console.log(e),this.viewProject={...e},this.dialogView=!0},async updateProject(){this.$refs.updateRef.validate((async e=>{if(!e)return;const t=await this.$request.put("/projects/"+this.editProject.id+"/",this.editProject);200===t.status?(this.$message({message:"修改项目成功",type:"success",duration:1e3}),this.getProject(),this.dialogEdit=!1):this.$message({message:"修改失败",type:"error",duration:1e3})}))},async proDelete(e){console.log("当前删除的数据id为：",e);const t=await this.$request.delete("/projects/"+e+"/");204===t.status?(this.$message({message:"删除成功",type:"success",duration:1e3}),this.getProject()):this.$message({message:"删除失败",type:"error",duration:1e3})},async getProject(){const e=await this.$request.get("/projects/",{params:{page:this.page,size:this.size}});if(200!==e.status)return this.$message.error("服务器异常");this.projectList=e.data.results,this.count=e.data.count,console.log(e)},handleSizeChange(e){this.size=e,this.page=1,this.getProject()},handleCurrentChange(e){this.page=e,this.getProject()}},mounted(){this.getProject()}},ze=Ce,Re=(0,c.Z)(ze,ke,_e,!1,null,null,null),Ee=Re.exports,qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"statistic"},[t("el-card",{staticClass:"card-container"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("统计分析")])],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("自定义柱状图")])],1)],1),t("bar1")],1)],1),t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("自定义饼图")])],1)],1),t("pie1")],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("自定义柱状图")])],1)],1),t("bar1")],1)],1),t("el-col",{attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("自定义地图")])],1)],1),t("geomap")],1)],1)],1)],1)],1)},Se=[],Ie=function(){var e=this,t=e._self._c;return t("div",{ref:"Echart",staticStyle:{width:"auto",height:"400px"}})},Le=[],Ve=o(9043),De={name:"bar1",data(){return{option:{title:{text:"类型1 vs 类型2",subtext:"示例数据"},tooltip:{trigger:"axis"},legend:{data:["类型1","类型2"]},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}],yAxis:[{type:"value"}],series:[{name:"类型1",type:"bar",data:[2,4.9,7,23.2,25.6,76.7,135.6,162.2,32.6,20,6.4,3.3],markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}},{name:"类型2",type:"bar",data:[2.6,5.9,9,26.4,28.7,70.7,175.6,182.2,48.7,18.8,6,2.3],markPoint:{data:[{name:"Max",value:182.2,xAxis:7,yAxis:183},{name:"Min",value:2.3,xAxis:11,yAxis:3}]},markLine:{data:[{type:"average",name:"Avg"}]}}]}}},mounted(){this.echartsInit()},methods:{echartsInit(){Ve.S1(this.$refs.Echart).setOption(this.option)}}},Ae=De,Me=(0,c.Z)(Ae,Ie,Le,!1,null,"5e9f3c5e",null),Oe=Me.exports,Te=function(){var e=this,t=e._self._c;return t("div",{ref:"Echart",staticStyle:{width:"auto",height:"400px"}})},Ze=[],Fe={name:"pie1",data(){return{option:{legend:{top:"bottom"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"示例饼状图",type:"pie",radius:["10%","70%"],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:[{value:40,name:"示例 1"},{value:38,name:"示例 2"},{value:32,name:"示例 3"},{value:30,name:"示例 4"},{value:28,name:"示例 5"},{value:26,name:"示例 6"},{value:22,name:"示例 7"},{value:18,name:"示例 8"}]}]}}},mounted(){this.echartsInit()},methods:{echartsInit(){Ve.S1(this.$refs.Echart).setOption(this.option)}}},He=Fe,Ne=(0,c.Z)(He,Te,Ze,!1,null,"5a1f7478",null),Je=Ne.exports,Ue=function(){var e=this,t=e._self._c;return t("div",[t("div",{ref:"GeoMap",staticStyle:{width:"auto",height:"400px"},attrs:{id:"main"}}),e.isDeep?t("button",{on:{click:function(t){return e.backToLastMap()}}},[e._v("返回上一层")]):e._e()])},Ge=[],Ke=o(4161),Ye=o(8499),Be=o.n(Ye),We={setup(){const e=(0,a.ref)(),t=(0,a.ref)(!1),o=(0,a.ref)([]),r=()=>{e.value=Ve.S1(document.getElementById("main")),s(e,"中华人民共和国","100000",!1),e.value.on("click",(o=>{const a=o.name,r=o.data.value.adcode;"100000"!==r&&(t.value=!0),s(e,a,r)}))},l=()=>{o.value.pop();const a=o.value[o.value.length-1],{geoName:r,adcode:l}=a;"100000"===l&&(t.value=!1),s(e,r,l)},s=async(e,t,a)=>{e.value.showLoading();try{const r=await c(a,t);-1===o.value.findIndex((e=>e.adcode===a))&&o.value.push({geoName:t,adcode:a});const l=n(t,r);e.value.setOption(l)}catch(r){return Ye.Message.info("已经是最后一层了。")}finally{e.value.hideLoading()}};let i="";const c=async(e="100000",t)=>{if(e===i)throw new Error("已经是最后一层了。");const o=await Ke.Z.get(`https://geo.datav.aliyun.com/areas_v2/bound/${e}_full.json`);i=e,Ve.je(t,o.data);const a=o.data.features.map((e=>({value:e.properties,name:e.properties.name})));return a},n=(e,t)=>{const o={title:{text:e},tooltip:{trigger:"item"},series:[{type:"map",map:e,data:t}],animation:!0};return o};return(0,a.onMounted)((()=>{r()})),{myChart:e,isDeep:t,backToLastMap:l}}},Xe=We,Qe=(0,c.Z)(Xe,Ue,Ge,!1,null,null,null),et=Qe.exports,tt={name:"statistic",components:{bar1:Oe,pie1:Je,geomap:et}},ot=tt,at=(0,c.Z)(ot,qe,Se,!1,null,"08ea59e3",null),rt=at.exports;a["default"].use(u.ZP);const lt=[{path:"/",redirect:"/geoinfo"},{path:"/login",name:"login",component:h},{path:"/home",name:"home",component:x,redirect:"/geoinfo",children:[{path:"/geoinfo",name:"geoinfo",component:K},{path:"/grassland",name:"grassland",component:ee},{path:"/geoinfo1",name:"geoinfo1",component:se},{path:"/geoinfo2",name:"geoinfo2",component:de},{path:"/geoinfo3",name:"geoinfo3",component:ve},{path:"/geoinfo4",name:"geoinfo4",component:$e},{path:"/geoinfo5",name:"geoinfo5",component:Ee},{path:"/statistic",name:"statistic",component:rt}]}],st=new u.ZP({routes:lt});st.beforeEach(((e,t,o)=>"/login"===e.path||window.sessionStorage.getItem("token")?o():o("/login")));var it=st;a["default"].use(Be());const ct=Ke.Z.create({validateStatus:function(e){return!0},baseURL:"http://127.0.0.1:8001"});ct.interceptors.request.use((function(e){return window.sessionStorage.getItem("token")&&(e.headers.Authorization="JWT "+window.sessionStorage.getItem("token")),console.log("请求头",e.headers),e}));var nt=ct;a["default"].prototype.$request=nt,a["default"].config.productionTip=!1,new a["default"]({router:it,render:e=>e(p)}).$mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}o.m=e,function(){o.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){o.amdO={}}(),function(){var e=[];o.O=function(t,a,r,l){if(!a){var s=1/0;for(p=0;p<e.length;p++){a=e[p][0],r=e[p][1],l=e[p][2];for(var i=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(o.O).every((function(e){return o.O[e](a[c])}))?a.splice(c--,1):(i=!1,l<s&&(s=l));if(i){e.splice(p--,1);var n=r();void 0!==n&&(t=n)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[a,r,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,l,s=a[0],i=a[1],c=a[2],n=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(c)var p=c(o)}for(t&&t(a);n<s.length;n++)l=s[n],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(p)},a=self["webpackChunkvue2_desert"]=self["webpackChunkvue2_desert"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(8529)}));a=o.O(a)})();
//# sourceMappingURL=app.efe0f9a5.js.map